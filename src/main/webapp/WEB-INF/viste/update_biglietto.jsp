<%@include file="header.jsp"%>

<div class="container">

	<div class="row mt-3">
		<div id="films" class="col-12 col-sm-6 col-md-6 bg-light"></div>

		<div class="col-12 col-sm-6 col-md-6 bg-light">
        <div class="row">

        <div class="col-6 col-sm-5 col-md-6 bg-light">
			<div class="row row-cols-1 mt-2">

				<div class="col ">
					<button id="L1" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L1" title="L1"
						type="submit">&#10148;</button>
					<button id="L2" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L2" title="L2"
						type="submit">&#10148;</button>
					<button id="L3" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L3" title="L3"
						type="submit">&#10148;</button>
					<button id="L4" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L4" title="L4"
						type="submit">&#10148;</button>


				</div>
				<div class="col">
					<button id="L5" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L5" title="L5"
						type="submit">&#10148;</button>
					<button id="L6" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L6" title="L6"
						type="submit">&#10148;</button>
					<button id="L7" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L7" title="L7"
						type="submit">&#10148;</button>
					<button id="L8" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L8" title="L8"
						type="submit">&#10148;</button>


				</div>
				<div class="col">
					<button id="L9" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L9" title="L9"
						type="submit">&#10148;</button>
					<button id="L10" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L10" title="L10"
						type="submit">&#10148;</button>
					<button id="L11" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L11" title="L11"
						type="submit">&#10148;</button>
					<button id="L12" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L12" title="L12"
						type="submit">&#10148;</button>


				</div>
				<div class="col">
					<button id="L13" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L13" title="L13"
						type="submit">&#10148;</button>
					<button id="L14" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L14" title="L14"
						type="submit">&#10148;</button>
					<button id="L15" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L15" title="L15"
						type="submit">&#10148;</button>
					<button id="L16" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L16" title="L16"
						type="submit">&#10148;</button>


				</div>
				<div class="col">
					<button id="L17" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L17" title="L17"
						type="submit">&#10148;</button>
					<button id="L18" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L18" title="L18"
						type="submit">&#10148;</button>
					<button id="L19" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L19" title="L19"
						type="submit">&#10148;</button>
					<button id="L20" class="btn btn-outline-primary text-center"
						style="width: 2rem text-center" value="L20" title="L20"
						type="submit">&#10148;</button>


				</div>
			</div>

        </div>
        
		<div class="col-6 col-sm-5 col-md-6 bg-light">
		    <div class="row row-cols-1 mt-2">

			    <div class="col">
				    <button id="R1" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R1" title="R1" type="submit">&#10032;</button>
				    <button id="R2" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R2" title="R2" type="submit">&#10032;</button>
				    <button id="R3" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R3" title="R3" type="submit">&#10032;</button>
				    <button id="R4" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R4" title="R4" type="submit">&#10032;</button>
                </div>
			    <div class="col">
				    <button id="R5" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R5" title="R5" type="submit">&#10032;</button>
				    <button id="R6" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R6" title="R6" type="submit">&#10032;</button>
				    <button id="R7" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R7" title="R6" type="submit">&#10032;</button>
				    <button id="R8" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R8" title="R8" type="submit">&#10032;</button>
                </div>
			    <div class="col">
				    <button id="R9" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R9" title="R9" type="submit">&#10032;</button>
				    <button id="R10" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R10" title="R10"
					    type="submit">&#10032;</button>
				    <button id="R11" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R11" title="R11"
					    type="submit">&#10032;</button>
				    <button id="R12" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R12" title="R12"
					    type="submit">&#10032;</button>
			    </div>
			    <div class="col">
				    <button id="R13" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R13" title="R13"
					    type="submit">&#10032;</button>
				    <button id="R14" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R14" title="R14"
					    type="submit">&#10032;</button>
				    <button id="R15" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R15" title="R15"
					    type="submit">&#10032;</button>
				    <button id="R16" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R16" title="R16"
					    type="submit">&#10032;</button>
    			</div>
			    <div class="col">
				    <button id="R17" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R17" title="R17"
					    type="submit">&#10032;</button>
				    <button id="R18" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R18" title="R18"
					    type="submit">&#10032;</button>
				    <button id="R19" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R19" title="R19"
					    type="submit">&#10032;</button>
				    <button id="R20" class="btn btn-outline-primary text-center"
					    style="width: 2rem text-center" value="R20" title="R20"
					    type="submit">&#10032;</button>
			    </div>
			
		    </div>
	    </div>
		           
        <div class="col-6 col sm-5 col-md-12 my-5">

                <form action="/biglietto/updateBiglietto/${biglietto.getId()}"
                    method="post">
    
                    <label for="film_id" class="form-label">Inserire il numero del
                        film che si vuole selezionare</label> <input style="width:4rem" type="text" name="film_id"
                        class="form-control" id="film_id" aria-describedby="film_id"
                        value="${biglietto.film_id}"> <label for="quantita"
                        class="form-label">Quantitï¿½</label>
                        <select style="width:4rem; margin-bottom:0.5rem" class="form-select"
                        name="quantita" aria-label="Default select example">
                        <option selected>${biglietto.quantita}</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        </select> <input type="text" style="margin-right:2rem" id="posto" name="posto" placeholder="posto">
    
                        <input type="hidden" name="utente_username" class="form-control"
                        id="utente_username" aria-describedby="utente_username"
                        value="${biglietto.utente_username}">
    
                    <button type="submit" class="btn btn-primary" value="update biglietto">salva</button>
    
                </form>
        
        </div>
        </div>
        </div> 
		
	</div>



	
</div>

<script type="text/javascript">
	var http = new XMLHttpRequest();
	const url = "http://localhost:9011/api/films";
	http.open("GET", url, true);
	http.send();
	http.onreadystatechange = function() {

		if (this.readyState == 4 && this.status == 200) {
			console.log(this.readyState);
			console.log(this.status);

			var myObj = JSON.parse(this.responseText);

			var films = document.getElementById("films");

			for (var i = 0; i < myObj.length; i++) {
				films.innerHTML += myObj[i].id + ') ' + myObj[i].titolo + ' - '
						+ myObj[i].giorno + '<br>';
			}
		}
	}

	var pulsanti = document.getElementsByClassName('btn btn-outline-primary');

	var h = new XMLHttpRequest();

	const urlBigl = "http://localhost:9011/api/biglietti";
	h.open("GET", urlBigl, true);
	h.send();

	h.onreadystatechange = function() {

		if (this.readyState == 4 && this.status == 200) {
			console.log(this.readyState);
			console.log(this.status);

			var myObj = JSON.parse(this.responseText);

			console.log(myObj)
			for (var i = 0; i < myObj.length; i++) {
				var seat = myObj[i].posto;

				// var seat = myObj[i].posto;
				for (var j = 0; j < pulsanti.length; j++) {

					// console.log(seat)

					if (seat.includes(pulsanti[j].value)) {
						pulsanti[j].setAttribute("class",
								"btn btn-danger disabled")

					}
					//console.log(pulsanti[j].value)

				}

			}
		}

	}
</script>

<%@include file="footer.jsp"%>